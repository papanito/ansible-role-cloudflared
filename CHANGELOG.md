### Changelog

All notable changes to this project will be documented in this file. Dates are displayed in UTC.

Generated by [`auto-changelog`](https://github.com/CookPete/auto-changelog).

#### [v3.11.0](https://github.com/papanito/ansible-role-cloudflared/compare/v3.10.0...v3.11.0)

> 21 October 2024

- feat: allow config key to differ from tunnel_id [`eaa35bf`](https://github.com/papanito/ansible-role-cloudflared/commit/eaa35bf1cf64e8e03544bbcc6115948496905c0d)

#### [v3.10.0](https://github.com/papanito/ansible-role-cloudflared/compare/v3.9.2...v3.10.0)

> 20 July 2023

- feat: add parameter `region` [`7a60cdd`](https://github.com/papanito/ansible-role-cloudflared/commit/7a60cdd4d605fed61664c3a62880c8d9cd7c6f10)
- feat: add parameter `edge_bind_address` [`723fbc6`](https://github.com/papanito/ansible-role-cloudflared/commit/723fbc6f9046295f81edd287abfbf29f920764a5)
- feat: add parameter `grace_period` [`789ea0e`](https://github.com/papanito/ansible-role-cloudflared/commit/789ea0e98f1e3cd7b38eb6f45eda21d8641dfa1b)

#### [v3.9.2](https://github.com/papanito/ansible-role-cloudflared/compare/v3.9.1...v3.9.2)

> 20 July 2023

- fix: restructure the way systemd/init-v is restarted [`99034bc`](https://github.com/papanito/ansible-role-cloudflared/commit/99034bcd2a70927a259cfeb2bf4b73d1ac06cee3)
- fix: typo in init-v system check [`e4fa14d`](https://github.com/papanito/ansible-role-cloudflared/commit/e4fa14ded17309015121d50c1fb63b980e1d018d)

#### [v3.9.1](https://github.com/papanito/ansible-role-cloudflared/compare/v3.9.0...v3.9.1)

> 20 July 2023

- fix: enabling of warp_routing [`e23936b`](https://github.com/papanito/ansible-role-cloudflared/commit/e23936bb708cf4b2fc0becc87c8067f16fab0618)

#### [v3.9.0](https://github.com/papanito/ansible-role-cloudflared/compare/v3.8.0...v3.9.0)

> 20 July 2023

- feat: use handler for systemd [`2315d2b`](https://github.com/papanito/ansible-role-cloudflared/commit/2315d2b00c17a7e59b9b050cf84d3e0d62bb09ef)
- fix: clanup tunnel variables [`8506dc8`](https://github.com/papanito/ansible-role-cloudflared/commit/8506dc8449ec2513795072ae4c13516c999692ef)
- feat: use handler for init-v [`72f3ab9`](https://github.com/papanito/ansible-role-cloudflared/commit/72f3ab934a1a81bc8a2c361c1100ab6a74619a11)

#### [v3.8.0](https://github.com/papanito/ansible-role-cloudflared/compare/v3.7.5...v3.8.0)

> 12 March 2023

- feat: fix linting errors [`53d45dd`](https://github.com/papanito/ansible-role-cloudflared/commit/53d45ddd1cf801a68cc9d47b8792384bfff2e587)

#### [v3.7.5](https://github.com/papanito/ansible-role-cloudflared/compare/v3.7.4...v3.7.5)

> 12 March 2023

- fix: binary filenames [`3196854`](https://github.com/papanito/ansible-role-cloudflared/commit/3196854c735f8435a5669ea90a880d64caac2ec0)
- fix: add `transport_loglevel`, remove `proto_loglevel` [`37a1eea`](https://github.com/papanito/ansible-role-cloudflared/commit/37a1eea8980aff54602e0849b87eb7c1fce0a6c6)

#### [v3.7.4](https://github.com/papanito/ansible-role-cloudflared/compare/v3.7.3...v3.7.4)

> 21 September 2022

- feat: enable UDP buffer size to be increased by quic-go (Linux) [`377e853`](https://github.com/papanito/ansible-role-cloudflared/commit/377e8532cc7e2ae818e8cb00b28341037127527f)

#### [v3.7.3](https://github.com/papanito/ansible-role-cloudflared/compare/v3.7.2...v3.7.3)

> 20 August 2022

Fixes #57

- fix: update download location [`#57`](https://github.com/papanito/ansible-role-cloudflared/issues/57)

#### [v3.7.2](https://github.com/papanito/ansible-role-cloudflared/compare/v3.7.1...v3.7.2)

> 20 August 2022

- fix: skip steps for cf_install_only [`8db2c8b`](https://github.com/papanito/ansible-role-cloudflared/commit/8db2c8befcf2e47ef94fa1ac2405d4a782a50062)

#### [v3.7.1](https://github.com/papanito/ansible-role-cloudflared/compare/v3.7.0...v3.7.1)

> 13 August 2022

- fix: Default values for Cloudflare apt repository [`c43f14b`](https://github.com/papanito/ansible-role-cloudflared/commit/c43f14b003fc30fedb08a647b5e5cbb28eced823)

#### [v3.7.0](https://github.com/papanito/ansible-role-cloudflared/compare/v3.6.2...v3.7.0)

> 22 July 2022

- feat: handle loabalancing setup [`125d38a`](https://github.com/papanito/ansible-role-cloudflared/commit/125d38aaf77a5e21601688913813faf9144d9ba7)
- fix: set logs activated by default (CF doc) [`4611a0f`](https://github.com/papanito/ansible-role-cloudflared/commit/4611a0f05445a2d4080ccbd09652113d4fd532f8)
- fix: add missing vars declaration on tag cf_configure usage [`e5b76f4`](https://github.com/papanito/ansible-role-cloudflared/commit/e5b76f442cf89c4b357000ef08bbbcd73e7eaf7d)

#### [v3.6.2](https://github.com/papanito/ansible-role-cloudflared/compare/v3.6.1...v3.6.2)

> 14 July 2022

- fix: missing var "systemd_filename" with tag cf_configure usage [`a963cd8`](https://github.com/papanito/ansible-role-cloudflared/commit/a963cd806349fa6b69ca51654f06a7ed7c8ba652)

#### [v3.6.1](https://github.com/papanito/ansible-role-cloudflared/compare/v3.6.0...v3.6.1)

> 19 January 2022

- fix: Create cf_config_dir with mode 0755 [`fca31b6`](https://github.com/papanito/ansible-role-cloudflared/commit/fca31b6c95b139d37ae1a218fee9ad0bb3db32c5)

#### [v3.6.0](https://github.com/papanito/ansible-role-cloudflared/compare/v3.5.0...v3.6.0)

> 4 January 2022

Add parameter to change the protocol used by the tunnel. Especially
useful to support upcoming UDP tunneling feature.

- feat: add protocol parameter for named tunnels [`012a977`](https://github.com/papanito/ansible-role-cloudflared/commit/012a9777bc8370aaedd01fb7e55135e2b04f015b)

#### [v3.5.0](https://github.com/papanito/ansible-role-cloudflared/compare/v3.4.0...v3.5.0)

> 4 December 2021

Fixes #40

- feat: add cf_install_target_dir to `ExecStart` [`#40`](https://github.com/papanito/ansible-role-cloudflared/issues/40)
- fix: ensure cloudflared is executable [`5bad606`](https://github.com/papanito/ansible-role-cloudflared/commit/5bad606c98671ff059a84128a1d84deb5e8daf9c)

#### [v3.4.0](https://github.com/papanito/ansible-role-cloudflared/compare/v3.3.0...v3.4.0)

> 2 December 2021

Closes to #40

- feat: Allow to override name of the daemon binary [`4655989`](https://github.com/papanito/ansible-role-cloudflared/commit/4655989784367c294e936a0fbe4281f1e6b8a7c6)

#### [v3.3.0](https://github.com/papanito/ansible-role-cloudflared/compare/v3.2.0...v3.3.0)

> 29 November 2021

- feat: added links for aarch64 [`ebcbae6`](https://github.com/papanito/ansible-role-cloudflared/commit/ebcbae646dba01f90f53dbd010e2fe9a655f6109)

#### [v3.2.0](https://github.com/papanito/ansible-role-cloudflared/compare/v3.1.0...v3.2.0)

> 30 September 2021

- feat: Add APT installation on Debian and Ubuntu [`6c68a1e`](https://github.com/papanito/ansible-role-cloudflared/commit/6c68a1ea6428e1fe94d4ba1291d8f11f12d07c18)
- feat: Add capability to add CIDR route to cf tunnel [`402f82c`](https://github.com/papanito/ansible-role-cloudflared/commit/402f82c1967c465f1a19a40d8efdc8d45146dbe8)
- fix: add condition to run task about adding cidr private network [`cc7bcb3`](https://github.com/papanito/ansible-role-cloudflared/commit/cc7bcb38bae2c3a976c16f06764f4dbf469f250b)

#### [v3.1.0](https://github.com/papanito/ansible-role-cloudflared/compare/v3.0.1...v3.1.0)

> 16 August 2021

You can also use Cloudflare Tunnel to connect any service that relies
on a TCP-based protocol to Cloudflare's network. Users in your organization can
then reach the service by enrolling into your organization's Cloudflare for Teams
account and using the WARP agent.

- feat: add new parameter `cf_warp_routing` [`7e678be`](https://github.com/papanito/ansible-role-cloudflared/commit/7e678be31ebbc7ffe90a94541ae6e336205f7080)

#### [v3.0.1](https://github.com/papanito/ansible-role-cloudflared/compare/v3.0.0...v3.0.1)

> 26 April 2021

- fix: disable looging of task with sensible information like `tunnel_secret` [`40225f5`](https://github.com/papanito/ansible-role-cloudflared/commit/40225f51ef1ac6f463c5f5ed2d12045995863a0a)

### [v3.0.0](https://github.com/papanito/ansible-role-cloudflared/compare/v2.2.0...v3.0.0)

> 23 April 2021

This version implements [the new beahviour](https://blog.cloudflare.com/many-services-one-cloudflared/) of [named tunnels](https://blog.cloudflare.com/argo-tunnels-that-live-forever/)

The role should take care of cleanup if you used the role before v.3.0.0.

However **you have to update the configuration (variables)** in your ansible project.
I renamed the variables - usually prefixed with `cf_` to make them unique to the role.
If they are not unique it may happen that variables using the same name
in different roles can have undesired side-effects.

feat: enable dns routing for named tunnels

- feat: add named tunnels fixes #16 [`#16`](https://github.com/papanito/ansible-role-cloudflared/issues/16)
- feat!: rename variables to ensure to be role specific [`db0cabb`](https://github.com/papanito/ansible-role-cloudflared/commit/db0cabb994fbb4ef8b6ae1e2c34968be85a9324a)
- feat: optimize install and removal tasks [`6787c45`](https://github.com/papanito/ansible-role-cloudflared/commit/6787c45a734c84b76545be88aded0c45713be07c)
- feat: remove param `cf_do_legacy_cleanup` [`8f03326`](https://github.com/papanito/ansible-role-cloudflared/commit/8f0332643f2c39981fd986c50b0ce2e7aa55ffb8)

#### [v2.2.0](https://github.com/papanito/ansible-role-cloudflared/compare/v2.1.0...v2.2.0)

> 10 March 2021

Some system like  amazonlinux1 systems in the AWS do not use Systemd but Init-V Systems. This change allows to install cloudflared also for these.

Co-authored-by: xX08154711Xx &lt;manuelbernsau5+github@gmail.com&gt;

- Add ability to install cloudflared on Init-V Systems like amazonlinux1 [`#24`](https://github.com/papanito/ansible-role-cloudflared/pull/24)

#### [v2.1.0](https://github.com/papanito/ansible-role-cloudflared/compare/v2.0.2...v2.1.0)

> 23 December 2020

- Use `remove_unused_tunnels` to remove unused tunnels, closes #17 [`#17`](https://github.com/papanito/ansible-role-cloudflared/issues/17)
- Restart tunnels if their configuration has changed [`b479992`](https://github.com/papanito/ansible-role-cloudflared/commit/b479992a77c3b382ee1420e77609f8c831736313)
- Add support for `cert_content` [`682e2a3`](https://github.com/papanito/ansible-role-cloudflared/commit/682e2a376fe175c5bd4fcdc6599a4d09480baa74)
- Add `no_logfile` option to tunnel configuration [`363828d`](https://github.com/papanito/ansible-role-cloudflared/commit/363828ddc31195fba96458633e74cfb715e19542)

#### [v2.0.2](https://github.com/papanito/ansible-role-cloudflared/compare/v2.0.1...v2.0.2)

> 12 August 2020

- Fix: Create {{ ssh_config_file }} if it does not exist [`5e54bc4`](https://github.com/papanito/ansible-role-cloudflared/commit/5e54bc4c32a676ff75c0d01e155ac72b425ef782)

#### [v2.0.1](https://github.com/papanito/ansible-role-cloudflared/compare/v2.0.0...v2.0.1)

> 10 August 2020

- Add ssh-client config, closes issue #2 [`bbe5709`](https://github.com/papanito/ansible-role-cloudflared/commit/bbe57094b919c29c46412f8a9de2ea7c79b93dd6)

### [v2.0.0](https://github.com/papanito/ansible-role-cloudflared/compare/v1.0.5-beta...v2.0.0)

> 8 August 2020

Add cleanup of legacy stuff

- Use systemd template files, fixes #3, #4 [`#3`](https://github.com/papanito/ansible-role-cloudflared/issues/3)
- Fix issue #1, enable forced install [`429ff90`](https://github.com/papanito/ansible-role-cloudflared/commit/429ff90d1323a9a4bd56d3682805a43a046e329f)

#### [v1.0.5-beta](https://github.com/papanito/ansible-role-cloudflared/compare/v1.0.4...v1.0.5-beta)

> 3 August 2020

- Fix some bugs. role work properly now [`687e734`](https://github.com/papanito/ansible-role-cloudflared/commit/687e734ed7ed5f949063a7339189df32480450a6)
- `install_only` will only install, not login, not configure anything [`f76b669`](https://github.com/papanito/ansible-role-cloudflared/commit/f76b66909994660e0cd49cecaf33484b4df2db05)
- Fix: Copy cert only if defined [`d270d20`](https://github.com/papanito/ansible-role-cloudflared/commit/d270d201bdc69e302e2bcdcd52e55180a0b71631)

#### [v1.0.4](https://github.com/papanito/ansible-role-cloudflared/compare/v1.0.3...v1.0.4)

> 24 July 2020

- `install_only` will only install, not login, not configure anything [`0ea48eb`](https://github.com/papanito/ansible-role-cloudflared/commit/0ea48ebdcea079a5d196f1c25f01a42b629e4251)

#### [v1.0.3](https://github.com/papanito/ansible-role-cloudflared/compare/v1.0.2...v1.0.3)

> 24 July 2020

- Fix: Copy cert only if defined [`58512aa`](https://github.com/papanito/ansible-role-cloudflared/commit/58512aac3b75c554f0b6e97be2cb73b661580d8c)

#### [v1.0.2](https://github.com/papanito/ansible-role-cloudflared/compare/v1.0.1...v1.0.2)

> 24 July 2020

- Correct issue_tracker_url [`acf4312`](https://github.com/papanito/ansible-role-cloudflared/commit/acf4312f085384aaf2851c8d43eea802c4d98d71)
- Remove become as part of the role, leave this to user [`1c5b261`](https://github.com/papanito/ansible-role-cloudflared/commit/1c5b261b89f228fd4939026dd53d569b502266a0)

#### [v1.0.1](https://github.com/papanito/ansible-role-cloudflared/compare/v1.0.0...v1.0.1)

> 24 July 2020

- Fix some bugs. role work properly now [`ccfa40f`](https://github.com/papanito/ansible-role-cloudflared/commit/ccfa40f24c49dcd2600622804e84b2e62837224f)
- Update README.md [`2154b8c`](https://github.com/papanito/ansible-role-cloudflared/commit/2154b8cc2316d2c2b269cd3ea9c30ee721737a52)
- [¢i] Add import-role stage [`22ccbeb`](https://github.com/papanito/ansible-role-cloudflared/commit/22ccbebdee8120d0b4a3e43f1f1dea7cbf961192)

#### v1.0.0

> 23 July 2020

- Initial commit [`54ceeda`](https://github.com/papanito/ansible-role-cloudflared/commit/54ceeda4a792afe94135b0586195cca10c988c06)
